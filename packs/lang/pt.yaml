# Portuguese (pt)

settings:
  primaryStressDiv: 1.25
  secondaryStressDiv: 1.07

  # Smooth vowel-to-vowel transitions inside diphthongs ("ei", "ui", "au", ...).
  # This relies on the frontend option you added.
  segmentBoundarySkipVowelToVowel: true

normalization:
  replacements:
    # --- Nasal vowels ---
    # eSpeak pt (--ipa) often emits combining-tilde vowels (e.g. ɐ̃).
    # Convert them to NVSP's precomposed nasal vowels when available.
    - from: "ɐ̃ʊ̃"
      to: "ãᴜ"
    - from: "ɐ̃"
      to: "ã"
    - from: "õ"
      to: "õ"
    - from: "ũ"
      to: "ũ"
    - from: "ẽ"
      to: "ẽ"
    - from: "ĩ"
      to: "ĩ"
    - from: "ʊ̃"
      to: "ᴜ"

    # --- Diphthongs ---
    # Make the offglide a real glide so it is more audible and doesn't sound like two vowels.
    - from: "eɪ"
      to: "ej"
    - from: "oɪ"
      to: "oj"
    - from: "uɪ"
      to: "uj"
    - from: "aʊ"
      to: "aw"

    # --- R cleanup ---
    # eSpeak pt-pt sometimes emits ɹ (English-like) for /r/ in clusters and word-final.
    # Replace it with a tap so it doesn't sound English.
    - from: "ɹ"
      to: "ɾ"

    # --- Palatals ---
    # Portuguese 'lh' can surface as "lj".
    - from: "lj"
      to: "ʎ"
